@import "tailwindcss";
@import "tw-animate-css";
@import "./tailwind-typography";
@import "./font";

@theme {
  /*** Font stacks ***/
  --font-text: OBOSText, __OBOSText_Fallback, sans-serif;
  --font-display: OBOSDisplay, __OBOSDisplay_Fallback, sans-serif;

  /*** Widths ***/
  --container-width: 92rem;
  --container-gutter-width: 1rem;

  /*** Colors ***/
  --color-black: #333;
  --color-white: #fff;
  --color-gray: #818181;
  --color-gray-dark: #595959;
  --color-gray-light: #e6e6e6;
  --color-gray-lightest: #f1f1f1;
  --color-sky: #bedfec;
  --color-sky-light: #deeff5;
  --color-sky-lightest: #ebf5f9;
  --color-mint: #cdece2;
  --color-mint-light: #e6f5f0;
  --color-mint-lightest: #f0f9f6;
  --color-blue: #0047ba;
  --color-blue-light: #bedfec;
  --color-blue-lightest: #deeff5;
  --color-blue-dark: #002169;
  --color-green: #008761;
  --color-green-dark: #00524c;
  --color-green-light: #cdece2;
  --color-green-lightest: #e6f5f0;
  --color-red: #c0385d;
  --color-red-light: #faedef;
  --color-orange: #e8a74a;
  --color-orange-light: #f8e5c9;
  --color-yellow: #fff5d2;

  /** Breakpoints ***/
  --breakpoint-3xl: 108rem;
  --breakpoint-4xl: 120rem;
}

@layer base {
  @font-face {
    font-family: OBOSText;
    font-weight: 400;
    font-style: normal;
    src: url("https://www.obos.no/fonts/OBOSText-Regular.woff2") format("woff2");
    font-display: swap;
  }

  @font-face {
    font-family: OBOSText;
    font-weight: 400;
    font-style: italic;
    src: url("https://www.obos.no/fonts/OBOSText-Italic.woff2") format("woff2");
    font-display: swap;
  }

  @font-face {
    font-family: OBOSText;
    font-weight: 500;
    font-style: normal;
    src: url("https://www.obos.no/fonts/OBOSText-Medium.woff2") format("woff2");
    font-display: swap;
  }

  @font-face {
    font-family: OBOSDisplay;
    font-weight: 600; /* SemiBold */
    font-style: normal;
    src: url("https://www.obos.no/fonts/OBOSDisplay-SemiBold.woff2")
      format("woff2");
    font-display: swap;
  }

  html {
    @apply text-black antialiased font-normal font-text;
  }

  b {
    font-weight: 500;
  }

  strong {
    font-weight: 500;
  }

  a {
    text-decoration: underline;
  }

  ::selection {
    @apply bg-mint text-black;
  }
}

/*** Layout ***/
@utility page-layout {
  @apply flex flex-col min-h-screen;
}

@utility page-layout-main {
  @apply bg-white grow;
}

/** Grid column spacing */
@utility layout-grid-gap-x {
  @apply sm:gap-x-4 md:gap-x-9 lg:gap-x-12 xl:gap-x-16;
}

/** Grid base, defines the grid columns and their spacing */
@utility layout-grid {
  @apply layout-grid-gap-x sm:grid-cols-14 grid;
}

/** Grid container that applies the grid columns, grid spacing and the container component class */
@utility layout-grid-container {
  @apply layout-grid container;
  /** Make content of the grid span the mid 12 columns as a default (unless it has another explicit col-span class) */
  &
    > *:not([class^="col-span-"]):not([class^="col-end-"]):not(
      [class*=" col-span-"]
    ):not([class*=" col-end-"]):not([class*=" sm:col-span-"]):not(
      [class*=" sm:col-end-"]
    ):not([class^="sm:col-span-"]):not([class^="sm:col-end-"]) {
    @apply sm:col-span-12;
  }

  &
    > *:not([class^="col-start-"]):not([class^="col-span-full"]):not(
      [class*=" col-start-"]
    ):not([class*=" col-span-full"]):not([class*=" sm:col-start-"]):not(
      [class*=" sm:col-span-full"]
    ):not([class^="sm:col-start-"]):not([class^="sm:col-span-full"]) {
    @apply sm:col-start-2;
  }
}

@utility layout-subgrid-* {
  @apply layout-grid-gap-x grid;
}

@utility layout-subgrid-1 {
  @apply grid-cols-1;
}
@utility layout-subgrid-2 {
  @apply grid-cols-2;
}
@utility layout-subgrid-3 {
  @apply grid-cols-3;
}
@utility layout-subgrid-4 {
  @apply grid-cols-4;
}
@utility layout-subgrid-5 {
  @apply grid-cols-5;
}
@utility layout-subgrid-6 {
  @apply grid-cols-6;
}
@utility layout-subgrid-7 {
  @apply grid-cols-7;
}
@utility layout-subgrid-8 {
  @apply grid-cols-8;
}
@utility layout-subgrid-9 {
  @apply grid-cols-9;
}
@utility layout-subgrid-10 {
  @apply grid-cols-10;
}
@utility layout-subgrid-11 {
  @apply grid-cols-11;
}
@utility layout-subgrid-12 {
  @apply grid-cols-12;
}
@utility layout-subgrid-13 {
  @apply grid-cols-13;
}
@utility layout-subgrid-14 {
  @apply grid-cols-14;
}
@utility layout-subgrid-full {
  @apply layout-subgrid-14;
}

@utility layout-gap-x {
  @apply gap-x-2;
  @apply layout-grid-gap-x;
}

@utility layout-gap-y {
  @apply gap-y-4 sm:gap-y-6 md:gap-y-8 lg:gap-y-10 xl:gap-y-12;
}

@utility container {
  @apply w-full px-(--container-gutter-width) mx-auto max-w-(--container-width);
}

@utility container-prose {
  @apply w-full px-(--container-gutter-width) mx-auto;
  max-width: 45.5rem;
}

/*** Typography styles ***/
@utility heading-xl {
  @apply font-display font-semibold text-[2.8125rem]/[3.625rem] lg:text-[3.9375rem]/[5.125rem];
}

@utility heading-l {
  @apply font-display font-semibold text-[1.8125rem]/[2.75rem] lg:text-[2.25rem]/[3.5rem];
}

@utility heading-m {
  @apply font-text font-medium text-[1.4375rem]/[2.25rem] lg:text-[1.625rem]/[2.5625rem];
}

@utility heading-s {
  @apply font-text font-medium text-[1.1875rem]/[1.875rem] lg:text-[1.3125rem]/[2.125rem];
}

@utility heading-xs {
  @apply font-text font-medium text-[1.125rem]/[1.75rem] lg:text-[1.1875rem]/[1.9375rem];
}

@utility paragraph {
  @apply text-[1rem]/[1.625rem];
}

@utility lead {
  @apply font-medium text-[1.4375rem]/[2.25rem] lg:text-[1.625rem]/[2.5625rem];
}

@utility blockquote {
  @apply font-medium italic grid grid-cols-[3rem_1fr] gap-x-[0.4375rem] pt-4 text-[1.625rem]/[2.5625rem] lg:text-[1.4375rem]/[2.25rem] before:text-[4.6875rem]/[1.6875rem] before:font-display before:not-italic before:content-["â€œ"];
}

@utility description {
  @apply text-[0.875rem]/[1.375rem] lg:text-[0.875rem]/[1.4375rem];
}

/* Focus styles */
@utility outline-focus {
  @apply outline-2 outline-black;
}

@utility outline-focus-offset {
  @apply outline-focus outline-offset-2;
}

@utility outline-focus-inset {
  @apply outline-focus -outline-offset-4;
}

@utility ring-focus {
  @apply ring-2 ring-black;
}

@utility ring-focus-offset {
  @apply ring-focus ring-offset-2;
}

/** Hides the scrollbar visually */
@utility scrollbar-hidden {
  /* For IE, Edge and Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */

  /* For Webkit-based browsers (Chrome, Safari and Opera) */
  &::-webkit-scrollbar {
    display: none;
  }
}

@layer components {
  /*** Link List component styles ***/
  .link-list-container {
    @apply @container;

    &:has([data-slot="heading"]) {
      .link-list,
      [data-slot="link-list"] {
        @apply overflow-visible;
      }
    }

    [data-slot="heading"] {
      @apply p-1.25;

      [data-slot="link"] {
        @apply py-2.25;
        & > svg {
          @apply text-base;
        }
      }

      &:not(:has([data-slot="link"])) {
        @apply my-2.25;
      }
    }

    [data-slot="link-list"] {
      @apply @sm:gap-x-4 @md:gap-x-9 @lg:gap-x-12 @xl:gap-x-16;

      &:has([data-slot="link-list-item"]:nth-child(6)):not(
          :has([data-slot="link-list-item"]:nth-child(9):last-child)
        ):not(:has([data-slot="link-list-item"]:nth-child(11))) {
        @apply @4xl:grid-cols-2;
      }
      &:has([data-slot="link-list-item"]:nth-child(9):last-child),
      &:has([data-slot="link-list-item"]:nth-child(11)) {
        @apply @4xl:grid-cols-3;
      }
    }
  }

  .link-list,
  [data-slot="link-list"] {
    /**
     * Hides dividers at the top of the list (overflow-y)
     * while preventing arrow icons from overflowing container when animated to the right (overflow-x)
     */
    @apply min-w-fit overflow-hidden grid auto-rows-max gap-y-px;
  }

  .link-list-item,
  [data-slot="link-list-item"] {
    /** Creates divider lines that works in any grid layout and with the focus ring */
    @apply after:-top-px relative p-1.25 after:absolute after:right-0 after:left-0 after:h-px after:w-full after:bg-gray-light;
    [data-slot="link"] {
      @apply paragraph;
    }
  }

  .link-list-container,
  .link-list-item,
  [data-slot="link-list-item"] {
    [data-slot="link"] {
      @apply flex w-full cursor-pointer justify-between gap-x-2 py-3.5 font-medium no-underline focus-visible:outline-focus;
    }
  }

  .link-list-container [data-slot="link"],
  [data-slot="link-list-item"] [data-slot="link"] {
    &:hover:not([download]):not([rel~="external"]) svg {
      @apply motion-safe:translate-x-1;
    }
    &[download]:hover svg {
      @apply motion-safe:translate-y-1;
    }
    &[rel~="external"]:hover svg {
      @apply motion-safe:-translate-y-0.5 motion-safe:translate-x-0.5;
    }
  }
}
